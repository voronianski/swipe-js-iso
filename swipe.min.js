!function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b():a.Swipe=b()}(this,function(){"use strict";return function(a,b){function c(){p=t.children,s=p.length,z=p.length<2?!1:b.continuous,o.transitions&&z&&p.length<3&&(t.appendChild(p[0].cloneNode(!0)),t.appendChild(t.children[1].cloneNode(!0)),p=t.children),q=new Array(p.length),r=Math.round(a.getBoundingClientRect().width||a.offsetWidth)-2*y,t.style.width=p.length*r+"px";for(var c=p.length;c--;){var d=p[c];d.style.width=r+"px",d.setAttribute("data-index",c),o.transitions&&(d.style.left=c*-r+y+"px",h(c,w>c?-r:c>w?r:0,0))}z&&o.transitions&&(h(f(w-1),-r,0),h(f(w+1),r,0)),o.transitions||(t.style.left=w*-r+y+"px"),a.style.visibility="visible"}function d(){z?g(w-1):w&&g(w-1)}function e(){z?g(w+1):w<p.length-1&&g(w+1)}function f(a){return(p.length+a%p.length)%p.length}function g(a,c){if(w!=a){if(o.transitions){var d=Math.abs(w-a)/(w-a);if(z){var e=d;d=-q[f(a)]/r,d!==e&&(a=-d*p.length+a)}for(var g=Math.abs(w-a)-1;g--;)h(f((a>w?a:w)-g-1),r*d,0);a=f(a),h(w,r*d,c||x),h(a,0,c||x),z&&h(f(a-d),-(r*d),0)}else a=f(a),j(w*-r,a*-r,c||x);w=a,n(b.callback&&b.callback(w,p[w]))}}function h(a,b,c){i(a,b,c),q[a]=b}function i(a,b,c){var d=p[a],e=d&&d.style;e&&(e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=c+"ms",e.webkitTransform="translate("+b+"px,0)translateZ(0)",e.msTransform=e.MozTransform=e.OTransform="translateX("+b+"px)")}function j(a,c,d){if(!d)return void(t.style.left=c+"px");var e=+new Date,f=setInterval(function(){var g=+new Date-e;return g>d?(t.style.left=c+"px",A&&k(),b.transitionEnd&&b.transitionEnd.call(event,w,p[w]),void clearInterval(f)):void(t.style.left=(c-a)*(Math.floor(g/d*100)/100)+a+"px")},4)}function k(){clearTimeout(u),u=setTimeout(e,A)}function l(){A=0,clearTimeout(u)}var m=function(){},n=function(a){setTimeout(a||m,0)},o={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,transitions:function(a){var b=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var c in b)if(void 0!==a.style[b[c]])return!0;return!1}(document.createElement("swipe"))};if(a){var p,q,r,s,t=a.children[0];b=b||{};var u,v,w=parseInt(b.startSlide,10)||0,x=b.speed||300,y=parseInt(b.sidePadding,10)||0,z=b.continuous=void 0!==b.continuous?b.continuous:!0,A=b.auto||0,B={},C={},D={handleEvent:function(a){switch(a.type){case"touchstart":this.start(a);break;case"touchmove":this.move(a);break;case"touchend":n(this.end(a));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":n(this.transitionEnd(a));break;case"resize":n(c)}b.stopPropagation&&a.stopPropagation()},start:function(a){var b=a.touches[0];B={x:b.pageX,y:b.pageY,time:+new Date},v=void 0,C={},t.addEventListener("touchmove",this,!1),t.addEventListener("touchend",this,!1)},move:function(a){if(!(a.touches.length>1||a.scale&&1!==a.scale||b.disableScroll)){var c=a.touches[0];C={x:c.pageX-B.x,y:c.pageY-B.y},"undefined"==typeof v&&(v=!!(v||Math.abs(C.x)<Math.abs(C.y))),v||(a.preventDefault(),l(),z?(i(f(w-1),C.x+q[f(w-1)],0),i(w,C.x+q[w],0),i(f(w+1),C.x+q[f(w+1)],0)):(C.x=C.x/(!w&&C.x>0||w==p.length-1&&C.x<0?Math.abs(C.x)/r+1:1),i(w-1,C.x+q[w-1],0),i(w,C.x+q[w],0),i(w+1,C.x+q[w+1],0)),b.swiping&&b.swiping(-C.x/r))}},end:function(a){var c=+new Date-B.time,d=Number(c)<250&&Math.abs(C.x)>20||Math.abs(C.x)>r/2,e=!w&&C.x>0||w==p.length-1&&C.x<0;z&&(e=!1);var g=C.x<0;v||(d&&!e?(g?(z?(h(f(w-1),-r,0),h(f(w+2),r,0)):h(w-1,-r,0),h(w,q[w]-r,x),h(f(w+1),q[f(w+1)]-r,x),w=f(w+1)):(z?(h(f(w+1),r,0),h(f(w-2),-r,0)):h(w+1,r,0),h(w,q[w]+r,x),h(f(w-1),q[f(w-1)]+r,x),w=f(w-1)),b.callback&&b.callback(w,p[w])):z?(h(f(w-1),-r,x),h(w,0,x),h(f(w+1),r,x)):(h(w-1,-r,x),h(w,0,x),h(w+1,r,x))),t.removeEventListener("touchmove",D,!1),t.removeEventListener("touchend",D,!1),t.removeEventListener("touchforcechange",function(){},!1)},transitionEnd:function(a){parseInt(a.target.getAttribute("data-index"),10)==w&&(A&&k(),b.transitionEnd&&b.transitionEnd.call(a,w,p[w]))}};return c(),A&&k(),o.addEventListener?(o.touch&&(t.addEventListener("touchstart",D,!1),t.addEventListener("touchforcechange",function(){},!1)),o.transitions&&(t.addEventListener("webkitTransitionEnd",D,!1),t.addEventListener("msTransitionEnd",D,!1),t.addEventListener("oTransitionEnd",D,!1),t.addEventListener("otransitionend",D,!1),t.addEventListener("transitionend",D,!1)),window.addEventListener("resize",D,!1)):window.onresize=function(){c()},{setup:function(){c()},slide:function(a,b){l(),g(a,b)},prev:function(){l(),d()},next:function(){l(),e()},stop:function(){l()},getPos:function(){return w},getNumSlides:function(){return s},kill:function(){l(),t.style.width="",t.style.left="";for(var a=p.length;a--;){var b=p[a];b.style.width="",b.style.left="",o.transitions&&i(a,0,0)}o.addEventListener?(t.removeEventListener("touchstart",D,!1),t.removeEventListener("webkitTransitionEnd",D,!1),t.removeEventListener("msTransitionEnd",D,!1),t.removeEventListener("oTransitionEnd",D,!1),t.removeEventListener("otransitionend",D,!1),t.removeEventListener("transitionend",D,!1),window.removeEventListener("resize",D,!1)):window.onresize=null}}}}});